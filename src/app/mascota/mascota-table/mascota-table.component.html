<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Dashboard Veterinaria</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
  <style>
    /* Incluye el CSS aqu√≠ si lo prefieres en un solo archivo */
  </style>
</head>
<body>

    <app-navegacion></app-navegacion>

    <!-- ========================= Main ==================== -->
    <div class="main">
        <div class="topbar">
            <div class="toggle">
                <ion-icon name="menu-outline"></ion-icon>
            </div>


            <div class="user">
                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRDcaEWpYQklMDUzSJPss_l5V9T7yC2xtK7OA&s	" alt="Usuario">
            </div>
        </div>

    <div class="container-principal">
      <h1>Listado de Mascotas</h1>
      
      <div class="contenedor-boton">
      
    </div>
      
    <div class="buscador">
      <input 
        type="text" 
        [(ngModel)]="nombreABuscar" 
        placeholder="Buscar mascota..." 
        class="input-busqueda" 
        style="padding: 12px; font-size: 18px; border-radius: 25px; border: 1px solid #ddd; width: 80%; outline: none; transition: all 0.3s ease;" 
      />
      <button 
        (click)="buscar()" 
        class="btn-buscar" 
        style="background-color: #5cadf4 !important; color: white !important; padding: 8px 18px !important; border-radius: 20px !important; font-size: 14px !important; border: none !important; transition: background-color 0.3s ease, transform 0.2s ease !important; width: auto !important; cursor: pointer !important;">
        Buscar
      </button>
    </div>
    


    <div class="button-container">
      <a class="btn-agregar" (click)="abrirFormularioMascota()"> Crear Mascota</a>
  </div>

   
  
      <div class="tabla-container">
        <table class="tabla">
          <thead>
            <tr>
              <th>ID</th>
              <th>Nombre</th>
              <th>Raza</th>
              <th>Edad</th>
              <th>Peso</th>
              <th>Enfermedad</th>
              <th>Foto</th>
              <th>Nacimiento</th>
              <th>Ingreso</th>
              <th>Salida</th>
              <th>Estado</th>
              <th>Cliente</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let mascota of mascotaList" (click)="mostrarMascota(mascota.idMascota)">
              <td>{{ mascota.idMascota }}</td>
              <td>{{ mascota.nombre }}</td>
              <td>{{ mascota.raza }}</td>
              <td>{{ mascota.edad }}</td>
              <td>{{ mascota.peso | number:'1.1-1' }}</td>
              <td>{{ mascota.enfermedad || '-' }}</td>
              <td>
                <img *ngIf="mascota.foto" [src]="mascota.foto" alt="Foto de {{ mascota.nombre }}" class="foto-tabla">
                <span *ngIf="!mascota.foto">-</span>
              </td>
              <td>{{ mascota.fechaNacimiento ? (mascota.fechaNacimiento | date:'yyyy/MM/dd') : '-' }}</td>
              <td>{{ mascota.fechaIngreso ? (mascota.fechaIngreso | date:'yyyy/MM/dd') : '-' }}</td>
              <td>{{ mascota.fechaSalida ? (mascota.fechaSalida | date:'yyyy/MM/dd') : '-' }}</td>
              <td>{{ mascota.estado === 1 ? 'Activo' : 'Inactivo' }}</td>
              <td>{{ mascota.cliente?.nombre }}</td>
              <td class="action-buttons">
                <button class="btn-detalles" (click)="mostrarMascota(mascota.idMascota); $event.stopPropagation()">Ver Detalles</button>
                <button *ngIf="esAdmin()" class="btn-editar" (click)="abrirFormularioMascotaEdicion(mascota.idMascota)">Editar</button>
                <button *ngIf="esAdmin()" class="btn-eliminar" (click)="eliminarMascota(mascota)">Eliminar</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div> <!-- End main -->